<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GCR GPU Perf</title>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸš€</text></svg>">
    
    <!-- External dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="static/css/main.css">
    <link rel="stylesheet" href="static/css/components.css">
    <link rel="stylesheet" href="static/css/tree.css">
    <link rel="stylesheet" href="static/css/charts.css">
</head>

<body>
    <div class="sidebar">
        <div class="sidebar-header">
            <h2>ðŸš€ GCR GPU Perf</h2>
        </div>

        <div class="tree-container">
            <div class="tree-title">
                <a href="https://quip-amazon.com/LMZOAHUpmrrc/-GCR-XC-Perf-" target="_blank"
                    style="color: #007bff; text-decoration: none;">ðŸ“– Usage Guide quip â†—</a>
            </div>
        </div>

        <div class="tree-container">
            <div class="tree-title">Token Configuration</div>
            <div class="slider-group">
                <label for="input-tokens">Input Tokens: <span id="input-tokens-value">1600</span></label>
                <input type="range" id="input-tokens" class="slider" min="100" max="4000" value="1600">
            </div>

            <div class="slider-group">
                <label for="output-tokens">Output Tokens: <span id="output-tokens-value">400</span></label>
                <input type="range" id="output-tokens" class="slider" min="50" max="2000" value="400">
            </div>

            <div class="slider-group">
                <label for="random-tokens">Random Tokens: <span id="random-tokens-value">1600</span></label>
                <input type="range" id="random-tokens" class="slider" min="100" max="4000" value="1600">
            </div>

            <div class="button-group" style="margin-top: 15px;">
                <button class="btn btn-success" id="add-chart-btn" onclick="addCurrentToChart()"
                    title="Add current model with token settings to comparison" disabled>
                    Add Chart
                </button>
                <button class="btn btn-primary" onclick="exportData()" title="Download raw data as CSV">
                    Export Data
                </button>
                <button class="btn btn-secondary" onclick="clearComparison()">Clear All</button>
            </div>
        </div>

        <div class="tree-container">
            <div class="tree-header">
                <div class="tree-title">Runtime / Instance / Model</div>
                <button class="refresh-btn" id="refresh-tree" title="Refresh test results from disk">
                    <span class="refresh-icon">â†»</span>
                </button>
            </div>
            <div class="tree-filter">
                <input type="text" id="tree-filter" class="filter-input" placeholder="Filter models..."
                    autocomplete="off">
                <button class="filter-clear" id="filter-clear" title="Clear filter">Ã—</button>
            </div>
            <ul class="tree" id="runtime-tree">
                <!-- Tree structure will be populated here -->
            </ul>
        </div>

        <div id="selected-info" class="selected-info" style="display: none;">
            <strong>Selected:</strong><br>
            <span id="selected-text">None</span>
        </div>

        <div id="comparison-list" class="comparison-list" style="display: none;">
            <h3>Chart Combinations:</h3>
            <div id="comparison-items"></div>
        </div>

        <div class="tree-container">
            <div class="tree-header">
                <div class="tree-title">Chart Display Settings</div>
                <button class="settings-toggle-btn" id="settings-toggle" title="Toggle chart settings">
                    <span class="settings-toggle-icon">â–¼</span>
                </button>
            </div>
            <div id="chart-settings" class="chart-settings-content expanded">
                <!-- Chart visibility checkboxes will be populated here -->
            </div>
        </div>

        <div class="copyleft">
            <a href="https://github.com/yytdfc/llm-performance-viz"
                target="_blank">https://github.com/yytdfc/llm-performance-viz</a>
        </div>
    </div>

    <div class="main-content">
        <div id="loading" class="loading" style="display: none;">
            Loading data...
        </div>

        <div id="error" class="error" style="display: none;"></div>

        <div id="charts-container" class="charts-container">
            <!-- Charts will be generated here -->
        </div>
    </div>

    <!-- JavaScript modules -->
    <script type="module" src="static/js/main.js"></script>
</body>

</html>